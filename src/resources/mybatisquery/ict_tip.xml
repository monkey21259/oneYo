<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
          "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="main.ict.tip.dao.TipDAO">

<insert id="tipInsert" parameterType="tipvo">

	INSERT INTO "ORCLICT00"."ICT_TIP"
            (
                TNUM
               ,TSUBJECT
               ,TCONTENT
               ,TPHOTO
               ,TCATEGORY
               ,MNUM
               ,DELETEYN
               ,INSERTDATE
               ,UPDATEDATE
            )
     VALUES (
                #{tnum}
               ,#{tsubject}
               ,#{tcontent}
               ,#{tphoto}
               ,#{tcategory}
               ,'M202212200001'
               ,'Y'
               ,SYSDATE
               ,SYSDATE
            )
            
</insert>


<!-- 
TNUM       NOT NULL VARCHAR2(20)   
TSUBJECT   NOT NULL VARCHAR2(200)  
TCONTENT   NOT NULL VARCHAR2(2000) 
TPHOTO              VARCHAR2(300)  
TCATEGORY           VARCHAR2(2)    
WARNING             NUMBER         
MNUM                VARCHAR2(20)   
THIT                NUMBER         
DELETEYN   NOT NULL VARCHAR2(1)    
INSERTDATE          DATE           
UPDATEDATE          DATE   
 -->
<select id="tipSelectAll" resultType="tipvo">

	SELECT	
			ROW_NUMBER() OVER (ORDER BY A.INSERTDATE, A.TNUM ASC) AS TIPNUM
		   ,A.TNUM			AS		TNUM
		   ,A.TSUBJECT		AS		TSUBJECT
		   ,A.TCONTENT		AS		TCONTENT
		   ,A.TPHOTO		AS		TPHOTO
		   ,A.TCATEGORY		AS		TCATEGORY
		   ,A.WARNING		AS		WARNING
		   ,A.MNUM			AS		MNUM
		   ,B.MNICK			AS		MNICK
		   ,A.THIT			AS		THIT
		   ,TO_CHAR(TO_DATE(A.INSERTDATE),'YYYY-MM-DD')  AS INSERTDATE
		   ,TO_CHAR(TO_DATE(A.UPDATEDATE), 'YYYY-MM-DD') AS UPDATEDATE
	FROM   "ORCLICT00"."ICT_TIP" A
          ,"ORCLICT00"."ICT_MEMBER"   B
	WHERE   A.MNUM = B.MNUM
	AND     A.DELETEYN = 'Y'
	AND     B.DELETEYN = 'Y'
	ORDER BY A.INSERTDATE, A.TNUM DESC

</select>

</mapper>